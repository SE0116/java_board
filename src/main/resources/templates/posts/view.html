<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="ko"
      th:replace="~{layout :: layout(~{::title}, ~{::section})}">
<head>
    <title th:text="'게시판 - ' + ${post.title}">게시판 - 상세</title>
    <link rel="stylesheet" th:href="@{/css/main.css}" />
</head>
<body>
<section class="container">
    <header class="page-header">
        <h1>게시판</h1>
        <div class="actions">
            <a th:href="@{/posts}" class="btn">목록</a>
            <a th:href="@{|/posts/${post.id}/edit|}" class="btn">수정</a>
            <form th:action="@{|/posts/${post.id}|}" method="post" style="display:inline;">
                <input type="hidden" name="_method" value="delete"/>
                <button type="submit" class="btn btn-danger" onclick="return confirm('삭제하시겠습니까?');">삭제</button>
            </form>
        </div>
    </header>

    <article class="post">
        <h2 th:text="${post.title}">제목</h2>
        <div class="meta">
            <span>작성자: <strong th:text="${post.author}">작성자</strong></span>
            <span style="margin-left:1rem;">조회수: <strong th:text="${post.viewCount}">0</strong></span>
            <span style="margin-left:1rem;" th:text="${#temporals.format(post.createdAt, 'yyyy-MM-dd HH:mm')}">작성일</span>
        </div>
        <hr/>
        <div class="content" th:utext="${#strings.escapeXml(post.content).replaceAll('\n', '<br/>')}">
            내용
        </div>
        <hr/>
        <div class="updated" th:if="${post.updatedAt != null}">
            마지막 수정: <span th:text="${#temporals.format(post.updatedAt, 'yyyy-MM-dd HH:mm')}">수정일</span>
        </div>
    </article>

    <section class="comments">
      <h3>댓글</h3>
      <ul>
        <li th:each="c : ${comments}">
          <b th:text="${c.author}">이름</b>
          <span th:text="${#temporals.format(c.createdAt, 'yyyy-MM-dd HH:mm')}">시간</span>
          <p th:text="${c.content}">내용</p>
        </li>
        <li th:if="${#lists.isEmpty(comments)}">댓글이 없습니다.</li>
      </ul>
    </section>
</section>
</body>
</html>
